<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Profile | Total Connect NFC</title>
    <meta name="description" content="Create, manage, and share digital business cards using NFC technology.">
    <meta name="image" content="https://tccards.tn/Assets/4.png">
    <meta property="og:image" content="https://tccards.tn/Assets/4.png">
    <link rel="icon" href="https://tccards.tn/Assets/150.png" type="image/x-icon">
    <meta property="og:image:width" content="1200">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <link href="https://cdn.tailwindcss.com" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
    <script>
        // Get the hash and remove the # symbol
        const hash = window.location.hash.substring(1);
        // Get the path from the URL
        const path = window.location.pathname;
        // Check if the path starts with /@ or /profile/
        if (path.startsWith('/@')) {
            // Redirect to the profile page with the hash
            window.location.href = `/profile/#${hash}`;
        } else if (path.startsWith('/profile/')) {
            // Redirect to the profile page with the hash
            window.location.href = `/profile/#${hash}`;
        } else if (path === '/404.html') {
            // If on 404 page, do nothing
        } else {
            // Redirect to 404 page if path is not recognized
            window.location.href = '/404.html';
        }
        // Check if the hash is not empty

        if (hash) {
            // Whitelist only safe characters: letters, numbers, hyphens, underscores
            const cleanHash = hash.replace(/[^a-zA-Z0-9-_]/g, ''); 
            
            if (cleanHash) {
                // Safe redirect with sanitized hash
                window.location.href = `/profile/#${cleanHash}`;
            } else {
                // Empty/invalid hash → 404
                window.location.href = '/404.html';
            }
        } else {
            // No hash → 404
            window.location.href = '/404.html';
        }
    </script>
</head>
<body>
    <div class="loader"></div>
</body>
</html>